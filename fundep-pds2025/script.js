function getColor(e){return e>5?"#084081":e>3?"#0868ac":e>1?"#2b8cbe":e>0?"#4eb3d3":"#f0f0f0"}function carregarMapa(){fetch("brazil-states.geojson").then(e=>e.json()).then(e=>{geojsonLayer&&map.removeLayer(geojsonLayer),geojsonLayer=L.geoJson(e,{style:function(e){let o=e.properties.name,t=document.getElementById("categoria").value;return{color:"#555",weight:1,fillColor:getColor(projetosData.filter(e=>e.estado===o&&("todos"===t||e.categoria===t)).length),fillOpacity:.7}},onEachFeature:function(e,o){o.on("mouseover",function(){let t=e.properties.name,a=document.getElementById("categoria").value,r=projetosData.filter(e=>e.estado===t&&("todos"===a||e.categoria===a));if(r.length>0){let e=r.map(e=>`<b>${e.ict}</b>: ${e.titulo} <br><i>${e.coordenador}</i>`).join("<br><br>");o.bindTooltip(`<b>${t}</b><br><br>${e}`,{sticky:!0}).openTooltip()}})}}).addTo(map)})}let map=L.map("map").setView([-14.235,-51.9253],4);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:8}).addTo(map);let geojsonLayer,projetosData=[];fetch("projetos.json").then(e=>e.json()).then(e=>{projetosData=e,carregarMapa()}),document.getElementById("categoria").addEventListener("change",carregarMapa);